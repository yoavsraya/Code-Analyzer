version: 1
frontend:
  phases:
    # Build phase with commands for React build
    build:
      commands:
        # Install dependencies for NodeJs
        - cd NodeJs && npm install
        # Build React application if needed
        - cd ../react && npm install && npm run build

  # Artifacts to be saved after the build phase
  artifacts:
    # Base directory remains the root of your project
    baseDirectory: /
    # Include only the contents of the build directory
    files:
      - react/build/*  # Capture all files within the React build directory
      - NodeJs/*        # Include all files from the NodeJs directory

  # Enable caching for the linked node_modules directory
  cache:
    paths:
      - NodeJs/node_modules  # Cache the linked node_modules directory
      - react/node_modules    # Cache the linked node_modules directory for React